Metadata-Version: 2.1
Name: cfripper
Version: 0.12.0
Summary: Library and CLI tool for analysing CloudFormation templates and check them for security compliance.
Home-page: https://github.com/Skyscanner/cfripper
Author: Skyscanner Product Security
Author-email: security@skyscanner.net
License: UNKNOWN
Platform: any
Requires-Python: >=3.7
Description-Content-Type: text/markdown
Requires-Dist: boto3 (<2,>=1.4.7)
Requires-Dist: PyYAML (>=4.2b1)
Requires-Dist: pycfmodel (>=0.5.1)
Requires-Dist: cfn-flip (>=1.2.0)
Provides-Extra: dev
Requires-Dist: black (==19.10b0) ; extra == 'dev'
Requires-Dist: flake8 (>=3.3.0) ; extra == 'dev'
Requires-Dist: isort (==4.3.21) ; extra == 'dev'
Requires-Dist: pytest (>=3.6) ; extra == 'dev'
Requires-Dist: pytest-cov (>=2.5.1) ; extra == 'dev'
Requires-Dist: pip-tools (==4.2.0) ; extra == 'dev'
Requires-Dist: moto (==1.3.13) ; extra == 'dev'
Provides-Extra: docs
Requires-Dist: ansi2html (==1.5.2) ; extra == 'docs'
Requires-Dist: markdown-include (==0.5.1) ; extra == 'docs'
Requires-Dist: mkdocs-exclude (==1.0.2) ; extra == 'docs'
Requires-Dist: mkdocs-macros-plugin ; extra == 'docs'
Requires-Dist: mkdocs-material (==4.5.1) ; extra == 'docs'
Requires-Dist: mkdocs (==1.0.4) ; extra == 'docs'
Requires-Dist: pygments (==2.5.2) ; extra == 'docs'

<img src="docs/img/logo.png" width="200">

# CFripper

[![Build Status](https://travis-ci.org/Skyscanner/cfripper.svg?branch=master)](https://travis-ci.org/Skyscanner/cfripper)
[![PyPI version](https://badge.fury.io/py/cfripper.svg)](https://badge.fury.io/py/cfripper)

Library and CLI tool for analysing CloudFormation templates and check them for security compliance.

Docs available in https://cfripper.readthedocs.io/

## CLI Usage

### Normal execution
```bash
$ cfripper /tmp/root.yaml /tmp/root_bypass.json --format txt
Analysing /tmp/root.yaml...
Not adding CrossAccountTrustRule failure in rootRole because no AWS Account ID was found in the config.
Valid: False
Issues found:
	- FullWildcardPrincipalRule: rootRole should not allow wildcards in principals (principal: '*')
	- IAMRolesOverprivilegedRule: Role 'rootRole' contains an insecure permission '*' in policy 'root'
Analysing /tmp/root_bypass.json...
Valid: True
```

### Using resolve flag
```bash
$ cfripper /tmp/root.yaml /tmp/root_bypass.json --format txt --resolve
Analysing /tmp/root.yaml...
Not adding CrossAccountTrustRule failure in rootRole because no AWS Account ID was found in the config.
Valid: False
Issues found:
	- FullWildcardPrincipalRule: rootRole should not allow wildcards in principals (principal: '*')
	- IAMRolesOverprivilegedRule: Role 'rootRole' contains an insecure permission '*' in policy 'root'
Analysing /tmp/root_bypass.json...
Not adding CrossAccountTrustRule failure in rootRole because no AWS Account ID was found in the config.
Valid: False
Issues found:
	- IAMRolesOverprivilegedRule: Role 'rootRole' contains an insecure permission '*' in policy 'root'
Monitored issues found:
	- PartialWildcardPrincipalRule: rootRole contains an unknown principal: 123456789012
	- PartialWildcardPrincipalRule: rootRole should not allow wildcard in principals or account-wide principals 
(principal: 'arn:aws:iam::123456789012:root')
```

### Using json format and output-folder argument
```bash
$ cfripper /tmp/root.yaml /tmp/root_bypass.json --format json --resolve --output-folder /tmp
Analysing /tmp/root.yaml...
Not adding CrossAccountTrustRule failure in rootRole because no AWS Account ID was found in the config.
Result saved in /tmp/root.yaml.cfripper.results.json
Analysing /tmp/root_bypass.json...
Not adding CrossAccountTrustRule failure in rootRole because no AWS Account ID was found in the config.
Result saved in /tmp/root_bypass.json.cfripper.results.json
```

